(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){t.exports=n(15)},15:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n(2),c=n(3),r=n(5),i=n(4),l=n(6),o=n(0),u=n.n(o),h=n(13),d=n.n(h),m=(n(21),n(10)),p=n.n(m),f=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return u.a.createElement("form",{onSubmit:function(e){return t.props.checkin(e)}},u.a.createElement(p.a,{type:"submit",variant:"danger"},"return"))}}]),e}(u.a.Component),b=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={itemSelected:"",itemDesc:""},n.handleUpdate=n.handleUpdate.bind(Object(a.a)(Object(a.a)(n))),n.handleSubmit=n.handleCheckout.bind(Object(a.a)(Object(a.a)(n))),n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"handleUpdate",value:function(t){var e=t.target.selectedIndex,n=t.target.options[e].text;n=n.substring(0,n.lastIndexOf("(")-1),this.setState({itemSelected:t.target.value,itemDesc:n})}},{key:"handleCheckout",value:function(t){var e=this;t.preventDefault(),this.props.studentId&&this.state.itemSelected&&fetch("http://localhost:5000/checkout/".concat(this.props.studentId,"/").concat(this.state.itemSelected),{method:"POST"}).then(function(){e.props.update(),e.setState({itemSelected:"",itemDesc:""})}).catch(function(){console.log("something went wrong")})}},{key:"render",value:function(){var t=this,e=this.props.allItems.map(function(t){return u.a.createElement("option",{key:t.id,value:t.id},t.description," (",t.available,")")});return u.a.createElement("form",{action:"/checkout",method:"POST",onSubmit:function(e){return t.handleCheckout(e)}},u.a.createElement("select",{className:"itemDropdown",onChange:function(e){return t.handleUpdate(e)},value:this.state.itemSelected?this.state.itemSelected:""},u.a.createElement("option",{value:""},"---please select an item---"),e),u.a.createElement(p.a,{variant:"success",size:"sm",type:"submit"},"Check Out"))}}]),e}(u.a.Component),v=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"returnItem",value:function(t){var e=this;t.preventDefault();var n=this.props.item.id,a=this.props.student.id;console.log("going to handle checkin"),fetch("http://localhost:5000/checkin/".concat(a,"/").concat(n),{method:"POST"}).then(function(){return e.props.update()}).catch(function(){console.log("something went wrong")})}},{key:"render",value:function(){var t=this,e=this.props.item,n=new Date(e.checkout_date);return n=n.toLocaleDateString("en-US"),u.a.createElement("tr",null,u.a.createElement("td",null,e.description),u.a.createElement("td",null,n),u.a.createElement("td",null,u.a.createElement(f,{checkin:function(e){return t.returnItem(e)},item:e.id})))}}]),e}(u.a.Component),O=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t,e=this;return this.props.student?(t=0===this.props.items.length?u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"3"},"no checked out items")):this.props.items.map(function(t){return u.a.createElement(v,{key:t.id,item:t,student:e.props.student,update:e.props.update})}),u.a.createElement("table",{className:"itemsTable table text-center"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:"3"},"Items on Loan to ",this.props.student.full_name)),u.a.createElement("tr",null,u.a.createElement("th",null,"Item"),u.a.createElement("th",null,"Date Checked Out"),u.a.createElement("th",null,"Action"))),u.a.createElement("tbody",null,t,u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"3"},u.a.createElement(b,{studentId:this.props.student.id,update:this.props.update,allItems:this.props.allItems})))))):u.a.createElement("p",{className:"itemsTable font-italic"},"Please select a student")}}]),e}(u.a.Component),j=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return u.a.createElement("li",{className:"studentRow",value:this.props.value,onClick:function(){return t.props.onClick(t.props.value,t.props.name)}},this.props.name)}}]),e}(u.a.Component),E=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={allStudents:[],filteredStudents:[],searchFilter:""},fetch("http://localhost:5000/students",{method:"GET",crossDomain:!0}).then(function(t){return t.json()}).then(function(t){n.setState({allStudents:t,filteredStudents:t})}),n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"handleChange",value:function(t){var e=t.toLowerCase(),n=this.state.allStudents.slice();n=n.filter(function(t){return t.full_name.toLowerCase().includes(e)}),this.setState({filteredStudents:n})}},{key:"render",value:function(){var t=this,e=this.state.filteredStudents.map(function(e){return u.a.createElement(j,{name:e.full_name,key:e.id,value:e.id,onClick:t.props.showStudent})});return u.a.createElement("div",{className:"search"},u.a.createElement("input",{placeholder:"search students...",onChange:function(e){return t.handleChange(e.target.value)}}),u.a.createElement("ul",{id:"studentList"},e))}}]),e}(u.a.Component),S=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={student:null,items:[],allItems:[]},n.updateTable=n.displayStudentItems.bind(Object(a.a)(Object(a.a)(n))),n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"displayStudent",value:function(t){var e=this;fetch("http://localhost:5000/students/".concat(t),{method:"GET",crossDomain:!0}).then(function(t){return t.json()}).then(function(t){e.setState({student:t[0]}),e.displayStudentItems()})}},{key:"displayItemDropdown",value:function(){var t=this;fetch("http://localhost:5000/items",{method:"GET",crossDomain:!0}).then(function(t){return t.json()}).then(function(e){return t.setState({allItems:e})})}},{key:"displayStudentItems",value:function(){var t=this,e=this.state.student.id;fetch("http://localhost:5000/students/".concat(e,"/items"),{method:"GET",crossDomain:!0}).then(function(t){return t.json()}).then(function(e){t.setState({items:e}),t.displayItemDropdown()})}},{key:"render",value:function(){return u.a.createElement("div",{className:"container"},u.a.createElement("h3",null,"Dojo Inventory"),u.a.createElement(E,{showStudent:this.displayStudent.bind(this)}),u.a.createElement(O,{student:this.state.student,items:this.state.items,update:this.updateTable,allItems:this.state.allItems}))}}]),e}(u.a.Component);d.a.render(u.a.createElement(S,null),document.getElementById("root"))},21:function(t,e,n){}},[[14,2,1]]]);
//# sourceMappingURL=main.bca286c5.chunk.js.map