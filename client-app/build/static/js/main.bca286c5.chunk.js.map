{"version":3,"sources":["index.js"],"names":["CheckinForm","_this","this","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","onSubmit","e","props","checkin","react_bootstrap_lib_Button__WEBPACK_IMPORTED_MODULE_9___default","type","variant","React","Component","CheckoutForm","_this2","Object","_Users_ncaldwell_Desktop_Projects_dojo_inventory_client_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_Users_ncaldwell_Desktop_Projects_dojo_inventory_client_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_ncaldwell_Desktop_Projects_dojo_inventory_client_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","state","itemSelected","itemDesc","handleUpdate","bind","_Users_ncaldwell_Desktop_Projects_dojo_inventory_client_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__","handleSubmit","handleCheckout","selectedIndex","target","selectedContent","options","text","substring","lastIndexOf","setState","value","_this3","preventDefault","studentId","fetch","concat","method","then","update","catch","console","log","_this4","items","allItems","map","item","key","id","description","available","action","className","onChange","size","ItemRow","_this5","student","_this6","checkout_date","Date","toLocaleDateString","returnItem","ItemTable","_this7","length","colSpan","full_name","Student","_this8","onClick","name","StudentSearch","_this9","allStudents","filteredStudents","searchFilter","crossDomain","res","json","jsonRes","val","searchVal","toLowerCase","students","slice","filter","st","includes","_this10","visibleStudents","showStudent","placeholder","handleChange","Index","_this11","updateTable","displayStudentItems","_this12","_this13","_this14","displayItemDropdown","displayStudent","ReactDOM","render","document","getElementById"],"mappings":"4OAKMA,mLACO,IAAAC,EAAAC,KACL,OACIC,EAAAC,EAAAC,cAAA,QAAMC,SAAU,SAACC,GAAD,OAAON,EAAKO,MAAMC,QAAQF,KACtCJ,EAAAC,EAAAC,cAACK,EAAAN,EAAD,CAAQO,KAAK,SAASC,QAAQ,UAA9B,kBAJUC,IAAMC,WAU1BC,cACF,SAAAA,EAAYP,GAAO,IAAAQ,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAf,KAAAa,IACfC,EAAAC,OAAAE,EAAA,EAAAF,CAAAf,KAAAe,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAAnB,KAAMM,KACDc,MAAQ,CACTC,aAAc,GACdC,SAAU,IAEdR,EAAKS,aAAeT,EAAKS,aAAaC,KAAlBT,OAAAU,EAAA,EAAAV,QAAAU,EAAA,EAAAV,CAAAD,KACpBA,EAAKY,aAAeZ,EAAKa,eAAeH,KAApBT,OAAAU,EAAA,EAAAV,QAAAU,EAAA,EAAAV,CAAAD,KAPLA,4EAUNT,GACT,IAAIuB,EAAgBvB,EAAEwB,OAAOD,cACzBE,EAAkBzB,EAAEwB,OAAOE,QAAQH,GAAeI,KACtDF,EAAkBA,EAAgBG,UAAU,EAAGH,EAAgBI,YAAY,KAAK,GAChFlC,KAAKmC,SAAS,CAACd,aAAchB,EAAEwB,OAAOO,MAAOd,SAAUQ,2CAG5CzB,GAAG,IAAAgC,EAAArC,KACdK,EAAEiC,iBACEtC,KAAKM,MAAMiC,WAAavC,KAAKoB,MAAMC,cACnCmB,MAAK,kCAAAC,OAAmCzC,KAAKM,MAAMiC,UAA9C,KAAAE,OAA2DzC,KAAKoB,MAAMC,cAAgB,CACvFqB,OAAQ,SAEPC,KAAK,WACFN,EAAK/B,MAAMsC,SACXP,EAAKF,SAAS,CAACd,aAAc,GAAIC,SAAU,OAE9CuB,MAAM,WAAOC,QAAQC,IAAI,2DAI7B,IAAAC,EAAAhD,KACDiD,EAAQjD,KAAKM,MAAM4C,SAASC,IAAI,SAACC,GAAD,OAAUnD,EAAAC,EAAAC,cAAA,UAAQkD,IAAKD,EAAKE,GAAIlB,MAAOgB,EAAKE,IAAKF,EAAKG,YAA5C,KAA2DH,EAAKI,UAAhE,OAE9C,OACIvD,EAAAC,EAAAC,cAAA,QAAMsD,OAAO,YAAYf,OAAO,OAAOtC,SAAU,SAACC,GAAD,OAAO2C,EAAKrB,eAAetB,KACxEJ,EAAAC,EAAAC,cAAA,UAAQuD,UAAU,eAAeC,SAAU,SAACtD,GAAD,OAAO2C,EAAKzB,aAAalB,IAAI+B,MAAOpC,KAAKoB,MAAMC,aAAerB,KAAKoB,MAAMC,aAAe,IAC/HpB,EAAAC,EAAAC,cAAA,UAAQiC,MAAM,IAAd,+BACCa,GAELhD,EAAAC,EAAAC,cAACK,EAAAN,EAAD,CAAQQ,QAAQ,UAAUkD,KAAK,KAAKnD,KAAK,UAAzC,qBAzCWE,IAAMC,WA+C3BiD,qLACSxD,GAAG,IAAAyD,EAAA9D,KACVK,EAAEiC,iBACF,IAAIc,EAAOpD,KAAKM,MAAM8C,KAAKE,GACvBS,EAAU/D,KAAKM,MAAMyD,QAAQT,GACjCR,QAAQC,IAAI,2BACZP,MAAK,iCAAAC,OAAkCsB,EAAlC,KAAAtB,OAA6CW,GAAQ,CACtDV,OAAQ,SAEPC,KAAK,kBAAMmB,EAAKxD,MAAMsC,WACtBC,MAAM,WAAOC,QAAQC,IAAI,2DAGzB,IAAAiB,EAAAhE,KACCoD,EAAOpD,KAAKM,MAAM8C,KACpBa,EAAgB,IAAIC,KAAKd,EAAKa,eAElC,OADAA,EAAgBA,EAAcE,mBAAmB,SAE7ClE,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,UAAKiD,EAAKG,aACVtD,EAAAC,EAAAC,cAAA,UAAK8D,GACLhE,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAACL,EAAD,CAAaS,QAAS,SAACF,GAAD,OAAO2D,EAAKI,WAAW/D,IAAK+C,KAAMA,EAAKE,cArB3D3C,IAAMC,WA2BtByD,mLACO,IAEGpB,EAFHqB,EAAAtE,KACL,OAAIA,KAAKM,MAAMyD,SAGPd,EAD4B,IAA5BjD,KAAKM,MAAM2C,MAAMsB,OACTtE,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,MAAIqE,QAAQ,KAAZ,yBAGJxE,KAAKM,MAAM2C,MAAME,IAAI,SAACC,GAAD,OAAUnD,EAAAC,EAAAC,cAAC0D,EAAD,CAASR,IAAKD,EAAKE,GAAIF,KAAMA,EAAMW,QAASO,EAAKhE,MAAMyD,QAASnB,OAAQ0B,EAAKhE,MAAMsC,WAI1H3C,EAAAC,EAAAC,cAAA,SAAOuD,UAAU,gCACbzD,EAAAC,EAAAC,cAAA,aACIF,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,MAAIqE,QAAQ,KAAZ,oBAAkCxE,KAAKM,MAAMyD,QAAQU,YAEzDxE,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,sBAGRF,EAAAC,EAAAC,cAAA,aACK8C,EACDhD,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,MAAIqE,QAAQ,KAAIvE,EAAAC,EAAAC,cAACU,EAAD,CAAc0B,UAAWvC,KAAKM,MAAMyD,QAAQT,GAAIV,OAAQ5C,KAAKM,MAAMsC,OAAQM,SAAUlD,KAAKM,MAAM4C,gBAOxHjD,EAAAC,EAAAC,cAAA,KAAGuD,UAAU,0BAAb,kCAjCI/C,IAAMC,WAsCxB8D,mLACO,IAAAC,EAAA3E,KACL,OACIC,EAAAC,EAAAC,cAAA,MAAIuD,UAAU,aAAatB,MAAOpC,KAAKM,MAAM8B,MAAOwC,QAAS,kBAAMD,EAAKrE,MAAMsE,QAAQD,EAAKrE,MAAM8B,MAAOuC,EAAKrE,MAAMuE,QAAQ7E,KAAKM,MAAMuE,aAH5HlE,IAAMC,WAQtBkE,cACF,SAAAA,EAAYxE,GAAO,IAAAyE,EAAA,OAAAhE,OAAAC,EAAA,EAAAD,CAAAf,KAAA8E,IACfC,EAAAhE,OAAAE,EAAA,EAAAF,CAAAf,KAAAe,OAAAG,EAAA,EAAAH,CAAA+D,GAAA3D,KAAAnB,KAAMM,KACDc,MAAQ,CACT4D,YAAa,GACbC,iBAAkB,GAClBC,aAAc,IAElB1C,MAAM,iCAAkC,CACpCE,OAAQ,MACRyC,aAAa,IAEZxC,KAAK,SAACyC,GAAD,OAASA,EAAIC,SAClB1C,KAAK,SAAC2C,GACHP,EAAK5C,SAAS,CAAC6C,YAAaM,EAASL,iBAAkBK,MAbhDP,4EAiBNQ,GACT,IAAIC,EAAYD,EAAIE,cAChBC,EAAW1F,KAAKoB,MAAM4D,YAAYW,QACtCD,EAAWA,EAASE,OAAO,SAACC,GAAD,OAAQA,EAAGpB,UAAUgB,cAAcK,SAASN,KACvExF,KAAKmC,SAAS,CAAC8C,iBAAkBS,qCAG5B,IAAAK,EAAA/F,KACDgG,EAAkBhG,KAAKoB,MAAM6D,iBAAiB9B,IAAI,SAAC0C,GAAD,OAClD5F,EAAAC,EAAAC,cAACuE,EAAD,CAASG,KAAMgB,EAAGpB,UAAWpB,IAAKwC,EAAGvC,GAAIlB,MAAOyD,EAAGvC,GAAIsB,QAAUmB,EAAKzF,MAAM2F,gBAChF,OACIhG,EAAAC,EAAAC,cAAA,OAAKuD,UAAU,UACXzD,EAAAC,EAAAC,cAAA,SAAO+F,YAAY,qBAAqBvC,SAAW,SAACtD,GAAD,OAAO0F,EAAKI,aAAa9F,EAAEwB,OAAOO,UACrFnC,EAAAC,EAAAC,cAAA,MAAImD,GAAG,eAAe0C,WA/BVrF,IAAMC,WAqC5BwF,cACF,SAAAA,EAAY9F,GAAO,IAAA+F,EAAA,OAAAtF,OAAAC,EAAA,EAAAD,CAAAf,KAAAoG,IACfC,EAAAtF,OAAAE,EAAA,EAAAF,CAAAf,KAAAe,OAAAG,EAAA,EAAAH,CAAAqF,GAAAjF,KAAAnB,KAAMM,KACDc,MAAQ,CACT2C,QAAS,KACTd,MAAO,GACPC,SAAU,IAEdmD,EAAKC,YAAcD,EAAKE,oBAAoB/E,KAAzBT,OAAAU,EAAA,EAAAV,QAAAU,EAAA,EAAAV,CAAAsF,KAPJA,8EAUJ/C,GAAI,IAAAkD,EAAAxG,KACfwC,MAAK,kCAAAC,OAAmCa,GAAM,CAC1CZ,OAAQ,MACRyC,aAAa,IAEZxC,KAAK,SAACyC,GAAD,OAASA,EAAIC,SAClB1C,KAAK,SAAC2C,GACHkB,EAAKrE,SAAS,CAAC4B,QAASuB,EAAQ,KAChCkB,EAAKD,sEAIK,IAAAE,EAAAzG,KAClBwC,MAAM,8BAA+B,CACjCE,OAAQ,MACRyC,aAAa,IAEZxC,KAAK,SAACyC,GAAD,OAASA,EAAIC,SAClB1C,KAAK,SAAC2C,GAAD,OAAamB,EAAKtE,SAAS,CAACe,SAAUoC,oDAG9B,IAAAoB,EAAA1G,KACdsD,EAAKtD,KAAKoB,MAAM2C,QAAQT,GAC5Bd,MAAK,kCAAAC,OAAmCa,EAAnC,UAA+C,CAChDZ,OAAQ,MACRyC,aAAa,IAEZxC,KAAK,SAACyC,GAAD,OAASA,EAAIC,SAClB1C,KAAK,SAAC2C,GACHoB,EAAKvE,SAAS,CAAEc,MAAOqC,IACvBoB,EAAKC,yDAKb,OACI1G,EAAAC,EAAAC,cAAA,OAAKuD,UAAU,aACXzD,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAC2E,EAAD,CAAemB,YAAcjG,KAAK4G,eAAepF,KAAKxB,QACtDC,EAAAC,EAAAC,cAACkE,EAAD,CAAWN,QAAS/D,KAAKoB,MAAM2C,QAASd,MAAOjD,KAAKoB,MAAM6B,MAAOL,OAAQ5C,KAAKsG,YAAapD,SAAUlD,KAAKoB,MAAM8B,mBAlD5GvC,IAAMC,WA0D1BiG,IAASC,OACL7G,EAAAC,EAAAC,cAACiG,EAAD,MACAW,SAASC,eAAe","file":"static/js/main.bca286c5.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Button from 'react-bootstrap/lib/Button';\n\nclass CheckinForm extends React.Component {\n    render() {\n        return (\n            <form onSubmit={(e) => this.props.checkin(e)}>\n                <Button type=\"submit\" variant=\"danger\">return</Button>\n            </form>\n        );\n    }\n}\n\nclass CheckoutForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            itemSelected: '',\n            itemDesc: '',\n        };\n        this.handleUpdate = this.handleUpdate.bind(this);\n        this.handleSubmit = this.handleCheckout.bind(this);\n    }\n\n    handleUpdate(e) {\n        let selectedIndex = e.target.selectedIndex;\n        let selectedContent = e.target.options[selectedIndex].text;\n        selectedContent = selectedContent.substring(0, selectedContent.lastIndexOf(\"(\")-1)\n        this.setState({itemSelected: e.target.value, itemDesc: selectedContent});\n    }\n\n    handleCheckout(e) {\n        e.preventDefault();\n        if (this.props.studentId && this.state.itemSelected) {\n            fetch(`http://localhost:5000/checkout/${this.props.studentId}/${this.state.itemSelected}`, {\n                method: \"POST\",\n            })\n                .then(() => {\n                    this.props.update();\n                    this.setState({itemSelected: '', itemDesc: ''});\n                })\n                .catch(() => {console.log(\"something went wrong\") })\n        }\n    }\n\n    render() {\n        let items = this.props.allItems.map((item) => <option key={item.id} value={item.id}>{item.description} ({item.available})</option>);\n        \n        return (\n            <form action=\"/checkout\" method=\"POST\" onSubmit={(e) => this.handleCheckout(e)}>\n                <select className=\"itemDropdown\" onChange={(e) => this.handleUpdate(e)} value={this.state.itemSelected ? this.state.itemSelected : ''}>\n                    <option value=''>---please select an item---</option>\n                    {items}\n                </select>\n                <Button variant=\"success\" size=\"sm\" type=\"submit\">Check Out</Button>\n            </form>\n        );\n    }\n}\n\nclass ItemRow extends React.Component {\n    returnItem(e) {\n        e.preventDefault();\n        let item = this.props.item.id;\n        let student = this.props.student.id;\n        console.log(\"going to handle checkin\")\n        fetch(`http://localhost:5000/checkin/${student}/${item}`, {\n            method: \"POST\",\n        })\n            .then(() => this.props.update() )\n            .catch(() => {console.log(\"something went wrong\")})\n    }\n\n    render() {\n        const item = this.props.item;\n        let checkout_date = new Date(item.checkout_date);\n        checkout_date = checkout_date.toLocaleDateString(\"en-US\");\n        return (\n            <tr>\n                <td>{item.description}</td>\n                <td>{checkout_date}</td>\n                <td><CheckinForm checkin={(e) => this.returnItem(e) } item={item.id} /></td>\n            </tr>\n        );\n    }\n}\n\nclass ItemTable extends React.Component {\n    render() {\n        if (this.props.student) {\n            let items;\n            if (this.props.items.length === 0) {\n                items = <tr><td colSpan=\"3\">no checked out items</td></tr>;\n            }\n            else {\n                items = this.props.items.map((item) => <ItemRow key={item.id} item={item} student={this.props.student} update={this.props.update} />);\n            }\n\n            return(\n                <table className=\"itemsTable table text-center\">\n                    <thead>\n                        <tr>\n                            <th colSpan=\"3\">Items on Loan to {this.props.student.full_name}</th>\n                        </tr>\n                        <tr>\n                            <th>Item</th>\n                            <th>Date Checked Out</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {items}\n                        <tr>\n                            <td colSpan=\"3\"><CheckoutForm studentId={this.props.student.id} update={this.props.update} allItems={this.props.allItems} /></td>\n                        </tr>\n                    </tbody>\n                </table>\n            );\n        }\n        else {\n            return (<p className=\"itemsTable font-italic\">Please select a student</p>);\n        }\n    }\n}\n\nclass Student extends React.Component {\n    render() {\n        return (\n            <li className=\"studentRow\" value={this.props.value} onClick={() => this.props.onClick(this.props.value, this.props.name)}>{this.props.name}</li>\n        );\n    }\n}\n\nclass StudentSearch extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            allStudents: [],\n            filteredStudents: [],\n            searchFilter: \"\",\n        }\n        fetch('http://localhost:5000/students', {\n            method: 'GET',\n            crossDomain: true,\n        })\n            .then((res) => res.json())\n            .then((jsonRes) => {\n                this.setState({allStudents: jsonRes, filteredStudents: jsonRes});\n            })\n    }\n\n    handleChange(val) {\n        let searchVal = val.toLowerCase();\n        let students = this.state.allStudents.slice();\n        students = students.filter((st) => st.full_name.toLowerCase().includes(searchVal));\n        this.setState({filteredStudents: students});\n    }\n\n    render() {\n        let visibleStudents = this.state.filteredStudents.map((st) =>\n            <Student name={st.full_name} key={st.id} value={st.id} onClick={ this.props.showStudent } />)\n        return(\n            <div className=\"search\">\n                <input placeholder=\"search students...\" onChange={ (e) => this.handleChange(e.target.value) } />\n                <ul id=\"studentList\">{visibleStudents}</ul>\n            </div>\n        );\n    }\n}\n  \nclass Index extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            student: null,\n            items: [],\n            allItems: [],\n        };\n        this.updateTable = this.displayStudentItems.bind(this);\n    }\n\n    displayStudent(id) {\n        fetch(`http://localhost:5000/students/${id}`, {\n            method: \"GET\",\n            crossDomain: true,\n        })\n            .then((res) => res.json())\n            .then((jsonRes) => {\n                this.setState({student: jsonRes[0]});\n                this.displayStudentItems();\n            })\n    }\n\n    displayItemDropdown() {\n        fetch('http://localhost:5000/items', {\n            method: 'GET',\n            crossDomain: true,\n        })\n            .then((res) => res.json())\n            .then((jsonRes) => this.setState({allItems: jsonRes}));\n    }\n\n    displayStudentItems() {\n        let id = this.state.student.id;\n        fetch(`http://localhost:5000/students/${id}/items`, {\n            method: 'GET',\n            crossDomain: true,\n        })\n            .then((res) => res.json())\n            .then((jsonRes) => {\n                this.setState({ items: jsonRes });\n                this.displayItemDropdown();\n            })\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <h3>Dojo Inventory</h3>\n                <StudentSearch showStudent={ this.displayStudent.bind(this) } />\n                <ItemTable student={this.state.student} items={this.state.items} update={this.updateTable} allItems={this.state.allItems} />\n            </div>\n        );\n    }\n}\n  \n// ========================================\n  \nReactDOM.render(\n    <Index />,\n    document.getElementById('root')\n);"],"sourceRoot":""}